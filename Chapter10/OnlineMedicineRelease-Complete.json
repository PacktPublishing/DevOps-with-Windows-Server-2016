{"source":0,"id":1,"revision":61,"name":"OnlineMedicineRelease-Complete","createdBy":{"id":"d8e45f12-47e3-4b4e-bfec-91376b248dac","displayName":"desiredstate","uniqueName":"desiredstate@outlook.com","url":"https://app.vssps.visualstudio.com/A6d5f405d-86ea-4477-a2ac-b88cb87a57c3/_apis/Identities/d8e45f12-47e3-4b4e-bfec-91376b248dac","imageUrl":"https://desiredstate.visualstudio.com/_api/_common/identityImage?id=d8e45f12-47e3-4b4e-bfec-91376b248dac"},"createdOn":"2016-11-20T15:50:46.033Z","modifiedBy":{"id":"d8e45f12-47e3-4b4e-bfec-91376b248dac","displayName":"desiredstate","uniqueName":"desiredstate@outlook.com","url":"https://app.vssps.visualstudio.com/A6d5f405d-86ea-4477-a2ac-b88cb87a57c3/_apis/Identities/d8e45f12-47e3-4b4e-bfec-91376b248dac","imageUrl":"https://desiredstate.visualstudio.com/_api/_common/identityImage?id=d8e45f12-47e3-4b4e-bfec-91376b248dac"},"modifiedOn":"2017-01-23T09:40:50.800Z","lastRelease":null,"path":"\\","variables":{"StorageAccountName":{"value":"dimdadumnns"},"ContainerName":{"value":"armt"},"resourceGroupName":{"value":"dimdum"},"StorageSAS":{"value":null,"isSecret":true}},"variableGroups":[],"environments":[{"id":1,"name":"Preparation","rank":1,"owner":{"id":"d8e45f12-47e3-4b4e-bfec-91376b248dac","displayName":"desiredstate","uniqueName":"desiredstate@outlook.com","url":"https://app.vssps.visualstudio.com/A6d5f405d-86ea-4477-a2ac-b88cb87a57c3/_apis/Identities/d8e45f12-47e3-4b4e-bfec-91376b248dac","imageUrl":"https://desiredstate.visualstudio.com/_api/_common/identityImage?id=d8e45f12-47e3-4b4e-bfec-91376b248dac"},"variables":{},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":1}]},"deployStep":{"tasks":[],"id":2},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":3}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false,"clean":false,"cleanOptions":"source"},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"eb72cb01-a7e5-427b-a8a1-1b31ccac8a43","version":"1.*","name":"AzureBlob File Copy","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourcePath":"$(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy/Deployment.zip","ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"41a59a6d-8c28-417e-b69d-3d2e8fe1e071","Destination":"AzureBlob","StorageAccount":"","StorageAccountRM":"$(StorageAccountName)","ContainerName":"$(ContainerName)","BlobPrefix":"","EnvironmentName":"","EnvironmentNameRM":"","ResourceFilteringMethod":"machineNames","MachineNames":"","vmsAdminUserName":"","vmsAdminPassword":"","TargetPath":"","AdditionalArguments":"","enableCopyPrerequisites":"false","CopyFilesInParallel":"true","CleanTargetBeforeCopy":"false","skipCACheck":"true","outputStorageUri":"","outputStorageContainerSasToken":"?sv=2015-04-05&ss=bfqt&srt=sco&sp=rwdlacup&se=2019-02-28T18:19:46Z&st=2016-11-24T10:19:46Z&spr=https&sig=%2FkGRVrofIJqFBOWYdR2PHI6axkOGLGR4ZMeh2Kne6Uc%3D"}},{"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"1.*","name":"Copy All Files","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"41a59a6d-8c28-417e-b69d-3d2e8fe1e071","ScriptType":"FilePath","ScriptPath":"$(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/PSScripts/UploadScriptFiles.ps1","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments","ScriptArguments":"-sqlFilePath \"$(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy/OnlinePharmacy.sql\" -scriptsFilePath \"$(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration\" -containerName $(ContainerName) -resourceGroupName $(resourceGroupName) -storageAccountName $(StorageAccountName)"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"deploymentAuthorizationOwner":0},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":2,"name":"test environment","rank":2,"owner":{"id":"d8e45f12-47e3-4b4e-bfec-91376b248dac","displayName":"desiredstate","uniqueName":"desiredstate@outlook.com","url":"https://app.vssps.visualstudio.com/A6d5f405d-86ea-4477-a2ac-b88cb87a57c3/_apis/Identities/d8e45f12-47e3-4b4e-bfec-91376b248dac","imageUrl":"https://desiredstate.visualstudio.com/_api/_common/identityImage?id=d8e45f12-47e3-4b4e-bfec-91376b248dac"},"variables":{"ResourceGroupName":{"value":"OnlineMedicineTest"},"OMSWorkspaceName":{"value":"dimdadumOMS"},"skuName":{"value":"test"},"deployLocation":{"value":"westeurope"},"regKey":{"value":"0d5a31c1-2267-4e06-bf0c-a1668ef04b4e"},"pullserverPort":{"value":"9900"},"webAppPort":{"value":"9999"},"wsResourceGroup":{"value":"dimdum"},"containerName":{"value":"armt"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":4}]},"deployStep":{"tasks":[],"id":5},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":6}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false,"clean":false,"cleanOptions":"source"},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"1.*","name":"Test  ARM Template deployment","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"41a59a6d-8c28-417e-b69d-3d2e8fe1e071","ScriptType":"FilePath","ScriptPath":"$(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/PSScripts/Test-ARMTemplate.ps1","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments","ScriptArguments":"-ARMTemplatePath $(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/Templates/OnlineMedicine.json -ARMTemplateParametersPath $(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/Templates/OnlineMedicine.parameters.json -resourceGroupName $(ResourceGroupName) -OMSWorkspaceName $(OMSWorkspaceName) -deployLocation $(deployLocation) -pullserverRegKey $(regKey) -pullserverPort $(pullserverPort) -webAppPort $(webAppPort)  -wsResourceGroup $(wsResourceGroup) -containerName $(containerName) -skuName $(skuName)"}},{"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"1.*","name":"Deploy Test Environment","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"41a59a6d-8c28-417e-b69d-3d2e8fe1e071","ScriptType":"FilePath","ScriptPath":"$(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/PSScripts/New-TemplateDeployment.ps1","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments","ScriptArguments":"-ARMTemplatePath $(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/Templates/OnlineMedicine.json -ARMTemplateParametersPath $(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/Templates/OnlineMedicine.parameters.json -resourceGroupName $(ResourceGroupName) -OMSWorkspaceName $(OMSWorkspaceName) -skuName $(skuName) -deploymentName $(RELEASE.RELEASENAME) -deployLocation $(deployLocation) -pullserverRegKey $(regKey) -pullserverPort $(pullserverPort) -webAppPort $(webAppPort)  -wsResourceGroup $(wsResourceGroup) -containerName $(containerName)"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"Prepare Pester Environment","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"filePath","scriptName":"$(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/PSScripts/PreparePesterEnvironment.ps1","arguments":"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"1.*","name":"Copy Operational Validation module","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"$(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/Tests/OperationalValidation/OnlineMedicine","Contents":"**","TargetFolder":"$(USERPROFILE)\\Documents\\WindowsPowerShell\\Modules","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"1.*","name":"Execute Pester unit test cases","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"41a59a6d-8c28-417e-b69d-3d2e8fe1e071","ScriptType":"FilePath","ScriptPath":"$(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/PSScripts/Execute-Pester.ps1","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments","ScriptArguments":"-testScriptPath  \"$(System.DefaultWorkingDirectory)\\OnlineMedicine\\Drop\\OnlinePharmacy.Configuration\\Tests\\UnitTests\" -releaseName \"$(RELEASE.RELEASENAME)\"  -resourceGroupName \"$(ResourceGroupName)\" -operationTestsPath \"$(System.DefaultWorkingDirectory)\\OnlineMedicine\\Drop\\OnlinePharmacy.Configuration\\Tests\\OperationalValidation\\OnlineMedicine\\Diagnostics\\Comprehensive\""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"deploymentAuthorizationOwner":0},"demands":[],"conditions":[{"name":"Preparation","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":1},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":6,"name":"Prod environment","rank":3,"owner":{"id":"d8e45f12-47e3-4b4e-bfec-91376b248dac","displayName":"desiredstate","uniqueName":"desiredstate@outlook.com","url":"https://app.vssps.visualstudio.com/A6d5f405d-86ea-4477-a2ac-b88cb87a57c3/_apis/Identities/d8e45f12-47e3-4b4e-bfec-91376b248dac","imageUrl":"https://desiredstate.visualstudio.com/_api/_common/identityImage?id=d8e45f12-47e3-4b4e-bfec-91376b248dac"},"variables":{"ResourceGroupName":{"value":"OnlineMedicineProd"},"OMSWorkspaceName":{"value":"dimdadumOMS"},"skuName":{"value":"prod"},"deployLocation":{"value":"westeurope"},"regKey":{"value":"0d5a31c1-2267-4e06-bf0c-a1668ef04b4e"},"pullserverPort":{"value":"9900"},"webAppPort":{"value":"9999"},"wsResourceGroup":{"value":"dimdum"},"containerName":{"value":"armt"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":16}]},"deployStep":{"tasks":[],"id":17},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":18}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false,"clean":false,"cleanOptions":"source"},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"1.*","name":"Test  ARM Template deployment","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"41a59a6d-8c28-417e-b69d-3d2e8fe1e071","ScriptType":"FilePath","ScriptPath":"$(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/PSScripts/Test-ARMTemplate.ps1","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments","ScriptArguments":"-ARMTemplatePath $(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/Templates/OnlineMedicine.json -ARMTemplateParametersPath $(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/Templates/OnlineMedicine.parameters.json -resourceGroupName $(ResourceGroupName) -OMSWorkspaceName $(OMSWorkspaceName) -deployLocation $(deployLocation) -pullserverRegKey $(regKey) -pullserverPort $(pullserverPort) -webAppPort $(webAppPort)  -wsResourceGroup $(wsResourceGroup) -containerName $(containerName) -skuName $(skuName)"}},{"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"1.*","name":"Deploy Test Environment","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"41a59a6d-8c28-417e-b69d-3d2e8fe1e071","ScriptType":"FilePath","ScriptPath":"$(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/PSScripts/New-TemplateDeployment.ps1","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments","ScriptArguments":"-ARMTemplatePath $(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/Templates/OnlineMedicine.json -ARMTemplateParametersPath $(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/Templates/OnlineMedicine.parameters.json -resourceGroupName $(ResourceGroupName) -OMSWorkspaceName $(OMSWorkspaceName) -skuName $(skuName) -deploymentName $(RELEASE.RELEASENAME) -deployLocation $(deployLocation) -pullserverRegKey $(regKey) -pullserverPort $(pullserverPort) -webAppPort $(webAppPort)  -wsResourceGroup $(wsResourceGroup) -containerName $(containerName)"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"Prepare Pester Environment","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"filePath","scriptName":"$(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/PSScripts/PreparePesterEnvironment.ps1","arguments":"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"1.*","name":"Copy Operational Validation module","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"$(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/Tests/OperationalValidation/OnlineMedicine","Contents":"**","TargetFolder":"$(USERPROFILE)\\Documents\\WindowsPowerShell\\Modules","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"1.*","name":"Execute Pester unit test cases","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"41a59a6d-8c28-417e-b69d-3d2e8fe1e071","ScriptType":"FilePath","ScriptPath":"$(System.DefaultWorkingDirectory)/OnlineMedicine/Drop/OnlinePharmacy.Configuration/PSScripts/Execute-Pester.ps1","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments","ScriptArguments":"-testScriptPath  \"$(System.DefaultWorkingDirectory)\\OnlineMedicine\\Drop\\OnlinePharmacy.Configuration\\Tests\\UnitTests\" -releaseName \"$(RELEASE.RELEASENAME)\"  -resourceGroupName \"$(ResourceGroupName)\" -operationTestsPath \"$(System.DefaultWorkingDirectory)\\OnlineMedicine\\Drop\\OnlinePharmacy.Configuration\\Tests\\OperationalValidation\\OnlineMedicine\\Diagnostics\\Comprehensive\""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"deploymentAuthorizationOwner":0},"demands":[],"conditions":[{"name":"test environment","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":1},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}}],"artifacts":[{"sourceId":"576aa4ac-900c-417a-ae45-89abf7cc26b4:10","type":"Build","alias":"OnlineMedicine","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://desiredstate.visualstudio.com/_permalink/_build/index?collectionId=c3e563aa-dd72-4cbe-99e6-ad1647af7326&projectId=576aa4ac-900c-417a-ae45-89abf7cc26b4&definitionId=10","name":""},"definition":{"id":"10","name":"OnlineMedicine"},"project":{"id":"576aa4ac-900c-417a-ae45-89abf7cc26b4","name":"Win2016DevOps"}},"isPrimary":true}],"triggers":[{"artifactAlias":"OnlineMedicine","triggerConditions":[{"sourceBranch":"master","tags":[]}],"triggerType":1}],"releaseNameFormat":"$(System.TeamProject)_$(Release.DefinitionName)_$(Release.ReleaseId)_$(Date:yyyyMMdd)$(Rev:.r)","retentionPolicy":null,"url":"https://desiredstate.vsrm.visualstudio.com/576aa4ac-900c-417a-ae45-89abf7cc26b4/_apis/Release/definitions/1","_links":{"self":{"href":"https://desiredstate.vsrm.visualstudio.com/576aa4ac-900c-417a-ae45-89abf7cc26b4/_apis/Release/definitions/1"},"web":{"href":"https://desiredstate.visualstudio.com/576aa4ac-900c-417a-ae45-89abf7cc26b4/_apps/hub/ms.vss-releaseManagement-web.hub-explorer?definitionId=1"}},"tags":[]}